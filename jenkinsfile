pipeline {
    agent any
        stages {
        stage('Build') {
            steps {
                script {
                    sh """
                    #!/bin/bash
                    ssh -i /tmp/id_rsa.pub root@192.168.224.134 << EOF
                    sh pre-checks.sh
                    exit 0
                    << EOF
                    """
                }
               
            }
        }
        stage('Test') {
            steps {
              sh patching.sh
            }
        }
        stage('post patching') {
            steps {
                sh post-checks.sh
            }
        }
    }
    post {
        always {
            echo "Patching has been completed successfully"
        }
    }
}
